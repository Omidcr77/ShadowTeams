<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShadowTeams • Chat</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="bg-noise"></div>

  <main class="container chat">
    <header class="chat-header">
      <div>
        <div class="chat-title">
          <span class="pill" id="teamCodePill">TEAM</span>
          <button id="copyCodeBtn" class="icon-btn" title="Copy team code">Copy code</button>
          <button id="copyInviteBtn" class="icon-btn" title="Copy invite link">Invite link</button>
          <span id="teamName">ShadowTeams</span>
        </div>
        <div class="chat-sub">
          <span class="room-badge">Room:</span>
          <span id="onlineCount">0</span> online •
          <span class="muted">You are</span> <span class="mono" id="meUser">...</span> •
          <span id="connStatus" class="status status-connecting">Connecting…</span>
          <span id="roomHint" class="hint muted">Share this room code with your friend.</span>
        </div>
      </div>
      <div class="chat-actions">
        <input id="chatSearch" class="input" style="max-width:220px" placeholder="Search messages (Ctrl+K)" />
        <label class="toggle">
          <input type="checkbox" id="profanityToggle" />
          <span>Local filter</span>
        </label>
        <button id="leaveBtn" class="btn danger">Leave Team</button>
      </div>
    </header>

    <section class="card chat-card">
      <div class="chat-layout">
        <aside class="room-panel">
          <div class="panel-title">Room Info</div>
          <div class="tiny">Share this code to join:</div>
          <div class="mono room-code-lg" id="roomCodeLg">TEAM</div>
          <div class="tiny" id="privacyBadge">Privacy mode: anonymous session</div>
        </aside>

        <div class="chat-panel">
          <div id="messages" class="messages">
            <div id="emptyState" class="empty-state">No messages yet. Start the conversation.</div>
            <div id="unreadMarker" class="unread-marker hidden">New messages</div>
          </div>
          <button id="jumpLatestBtn" class="jump-latest hidden">Jump to latest ↓</button>

          <div id="pinBanner" class="pin-banner hidden"></div>
          <div id="typing" class="typing muted"></div>

          <div class="composer">
            <textarea id="input" class="input composer-input" rows="2" placeholder="Type a message…" maxlength="500"></textarea>
            <button id="sendBtn" class="btn primary">Send</button>
          </div>
          <div class="composer-meta">
            <span class="muted">Enter to send • Shift+Enter newline</span>
            <span id="charCount" class="muted mono">0/500</span>
          </div>
        </div>
      </div>

      <div id="toast" class="toast hidden"></div>
    </section>
  </main>

  <div id="reportModal" class="modal hidden" aria-hidden="true">
    <div class="modal-card">
      <h3>Report message</h3>
      <div class="row chips" id="reportChips">
        <button class="chip" data-reason="Spam">Spam</button>
        <button class="chip" data-reason="Harassment">Harassment</button>
        <button class="chip" data-reason="Scam/Fraud">Scam/Fraud</button>
        <button class="chip" data-reason="Illegal content">Illegal content</button>
        <button class="chip" data-reason="Hate/abuse">Hate/abuse</button>
      </div>
      <label class="label" for="reportReasonInput">Reason</label>
      <input id="reportReasonInput" class="input" maxlength="200" placeholder="Type a reason" />
      <div class="row" style="justify-content:flex-end">
        <button id="reportCancel" class="btn">Cancel</button>
        <button id="reportSubmit" class="btn danger">Submit report</button>
      </div>
    </div>
  </div>

  <script src="/js/util.js"></script>
  <script src="/js/chat.js"></script>
</body>
</html>
